<!DOCTYPE html><html lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta http-equiv="Content-Script-Type" content="text/javascript">
  <title>公開鍵・秘密鍵</title>
  <style type="text/css">
    html {font-size:10pt;}  /* 基本となる文字サイズ */
    body {box-sizing: border-box;}  /* 枠線は要素サイズに含める */
    div {
      width: 90vw;
      word-break: break-all;
    }
  </style>
  <!-- style type="text/css" media="print"></style -->
</head>

<body>
  <h1>公開鍵・秘密鍵　動作検証</h1>
  <p>TechAcademy <a href="https://magazine.techacademy.jp/magazine/21244">JavaScriptで暗号化と復号化を行う方法を現役エンジニアが解説【初心者向け】</a></p>
  <p>GAS側 Google Apps Scriptメモ <a href="https://sites.google.com/site/gasgaidobukku/scon-%E3%82%B9%E3%83%97%E3%83%AC%E3%83%83%E3%83%89%E3%82%B7%E3%83%BC%E3%83%88%E3%81%AB%E3%83%AD%E3%82%B0%E3%82%92%E5%87%BA%E5%8A%9B%E3%81%99%E3%82%8B/%E3%83%A9%E3%82%A4%E3%83%96%E3%83%A9%E3%83%AA/cryptojs-%E6%9A%97%E5%8F%B7%E5%8C%96">CryptoJS - 暗号化</a></p>
  <div>
    <p>key string</p>
    <div>
      <input type="text" id="passPhrase" />
      <input type="submit" value="作成" onclick="genKey()" />
    </div>
    <p>公開鍵</p>
    <div id="public"></div>
    <p>秘密鍵</p>
    <div id="secret"></div>
  </div>
</body>
<script src="../js/cryptico.min.js"></script>
<script type="text/javascript">
  // RSA鍵の作り方
  var PassPhrase = "The Moon is a Harsh Mistress.";
  console.log("PassPhrase:", PassPhrase);
  var Bits = 1024;
  var MattsRSAkey = cryptico.generateRSAKey(PassPhrase, Bits);
  console.log("MattsRSAkey:", MattsRSAkey);

  // 公開鍵の作り方
  var MattsPublicKeyString = cryptico.publicKeyString(MattsRSAkey);
  console.log("MattsPublicKeyString:", MattsPublicKeyString);

  // 暗号化
  var PlainText = "Matt, I need you to help me with my Starcraft strategy.";
  console.log("PlainText:", PlainText);
  var EncryptionResult = cryptico.encrypt(PlainText, MattsPublicKeyString);
  console.log("EncryptionResult:", EncryptionResult.cipher);

  // 復号化
  var DecryptionResult = cryptico.decrypt(EncryptionResult.cipher, MattsRSAkey);
  console.log("DecryptionResult:", DecryptionResult);

  const genKey = () => {
    const passPhrase = document.getElementById('passPhrase').value;
    const privateKey = cryptico.generateRSAKey(passPhrase,1024);
    const publicKey = cryptico.publicKeyString(privateKey);
    document.getElementById('secret').innerText = JSON.stringify(privateKey);
    document.getElementById('public').innerText = publicKey;
  }
</script>
</html>