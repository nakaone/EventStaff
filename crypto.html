<!DOCTYPE html><html lang="ja">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <meta http-equiv="Content-Script-Type" content="text/javascript">
  <script src="js/crypto-js.3.3.0.min.js"></script>
  <title>script test</title>
  <style>
    /* =========================================================
    ========================================================= */
    html {font-size:10pt;  /* 基本となる文字サイズ */}
    body {box-sizing: border-box;}  /* 枠線は要素サイズに含める */
    div {margin:0px;padding:0px;}
  </style>
  <style> input { width: 500px; } </style>
</head>

<body>
  <div id="crypto">
    <h1>指定文字列の暗号化/復号</h1>
    <p><label>暗号鍵</label><input type="text" name="key" onchange="convert()" value="Oct.22,2022" /></p>
    <p><label>文字列</label><input type="text" name="str" onchange="convert()" /></p>
    <div class="encrypted">暗号化：<p></p></div>
    <div class="decrypted">復号化：<p></p></div>
  </div>
</body>
<script type="text/javascript">
const convert = () => {

  // パスフレーズ（暗号鍵）
  const passPhrase = document.querySelector('#crypto input[name="key"').value;

  // 暗号化・復号化対象文字列
  const str = document.querySelector('#crypto input[name="str"').value;
  let utf8_plain = CryptoJS.enc.Utf8.parse(str);

  // 暗号化
  let encrypted = CryptoJS.AES.encrypt( utf8_plain, passPhrase );

  // 復号化
  let decrypted = CryptoJS.AES.decrypt( str , passPhrase );
  let txt_dexrypted = decrypted.toString(CryptoJS.enc.Utf8);

  console.log(
    'passPhrase="' + passPhrase + '"\n'
    + 'str="' + str + '"\n'
    + 'utf8_plain="' + utf8_plain + '"\n'
    + 'encrypted="' + encrypted + '"\n'
    + 'decrypted="' + decrypted + '"\n'
    + 'txt_dexrypted="' + txt_dexrypted + '"\n'
  );

  document.querySelector('#crypto .encrypted p').innerText = encrypted;
  document.querySelector('#crypto .decrypted p').innerText = txt_dexrypted;
}
</script>
</html>